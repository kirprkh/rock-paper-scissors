<!DOCTYPE html>

<html lang="en">
    <head>
        <meta charset="utf-8">
        <link rel="stylesheet" href="styles.css">
        <title>RPS (game)</title>
    </head>
    <body>
        <div id="container">
            <div id="rules">
                Pick any side (i.e., paper) and click on it.
                A computer is against you. Whoever scores 5 points first wins!
            </div>
            <div id="scores">
                <div class="score">
                    <div class="points" id="player-score">0</div>
                    <div>Player's score</div>
                </div>
                <div class="score">
                    <div class="points" id="computer-score">0</div>
                    <div>Computer's score</div>
                </div>
            </div>
            <div id="selections">
                <div class="selection">
                    <input type="radio" id="rock" name="selection" value="rock">
                    <label for="rock">Rock</label>
                </div>
                <div class="selection">
                    <input type="radio" id="paper" name="selection" value="paper">
                    <label for="paper">Paper</label>
                </div>
                <div class="selection">
                    <input type="radio" id="scissors" name="selection" value="scissors">
                    <label for="scissors">Scissors</label>
                </div>
            </div>
            <div id="result"></div>
        </div>
    </body>
</html>

<script>
    let playerScore = 0, computerScore = 0;

    function getComputerChoice() {
        const items = ['rock', 'paper', 'scissors'];
        let randomIndex = Math.floor(Math.random() * 3);
        return items[randomIndex];
    }

    function getPlayerChoice() {
        const selections = document.getElementsByName('selection');
        for (let i = 0; i < selections.length; i++) {
            if (selections[i].checked) {
                return selections[i].value;
            }
        }
    }

    function chooseWinner(playerSelection, computerSelection) {
        if (playerSelection === computerSelection) {
            return;
        }

        if (playerSelection === 'rock' && computerSelection === 'scissors') {
            updatePlayerScore(playerScore);
        } else if (playerSelection === 'paper' && computerSelection === 'rock') {
            updatePlayerScore(playerScore);
        } else if (playerSelection === 'scissors' && computerSelection === 'paper') {
            updatePlayerScore(playerScore);
        } else {
            updateComputerScore(computerScore);
        }
    }

    function updatePlayerScore() {
        playerScore++;
        const score = document.querySelector('#player-score');
        score.textContent = playerScore;
    }

    function updateComputerScore() {
        computerScore++;
        const score = document.querySelector('#computer-score');
        score.textContent = computerScore;
    }

    function hasWinner() {
        return playerScore === 5
            || computerScore === 5;
    }

    function getWinner() {
        return (playerScore === 5) ? 'Player' : 'Computer';
    }

    function printWinner(winner) {
        const result = document.querySelector('#result');
        result.textContent = `${winner} wins!`;
    }

    const selections = document.querySelectorAll('.selection');

    function playRound() {
        const playerSelection = getPlayerChoice();
        const computerSelection = getComputerChoice();
        chooseWinner(playerSelection, computerSelection);
        if (hasWinner()) {
            const winner = getWinner();
            printWinner(winner);
        }
    }
    selections.forEach(selection => selection.addEventListener('click', playRound));
</script>